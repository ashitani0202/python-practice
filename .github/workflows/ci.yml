name: CI  # ワークフロー名（1回だけ）

on:
  workflow_dispatch:  # 手動実行
  pull_request:       # PR 作成・更新時に自動実行


jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10.11"

      - name: Install linters / type-check tools
        run: |
          pip install flake8 black isort mypy pyright
        continue-on-error: true      # ✅ エラーでも続行

      # ---------- Lint ----------
      - name: Run flake8 (lint)
        run: flake8 .
        continue-on-error: true      # ✅ エラーでも続行

      # ---------- Formatting Check ----------
      - name: Check formatting (black)
        run: black --check .
        continue-on-error: true      # ✅ エラーでも続行

      - name: Check import sort (isort)
        run: isort . --check-only
        continue-on-error: true      # ✅ エラーでも続行

      # ---------- Type Checking ----------
      - name: Run mypy
        run: mypy .
        continue-on-error: true      # ✅ エラーでも続行

      - name: Run pyright
        run: pyright
        continue-on-error: true      # ✅ エラーでも続行
